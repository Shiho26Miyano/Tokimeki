<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tokimeki</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
    <style>
        body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 40px; }
        .main-flex { display: flex; flex-wrap: wrap; gap: 40px; justify-content: center; }
        .container { background: #fff; padding: 30px; border-radius: 8px; max-width: 400px; min-width: 280px; flex: 1 1 340px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { text-align: center; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc; font-size: 1rem; }
        button { width: 100%; padding: 12px; background: #ff69b4; color: #fff; border: none; border-radius: 4px; font-size: 1.1rem; cursor: pointer; }
        button:hover { background: #ff1493; }
        .result { margin-top: 20px; text-align: center; font-size: 1.15rem; color: #333; }
        /* --- Modern noUiSlider Custom Style --- */
        .noUi-target {
            background: #e0e0e0;
            border-radius: 8px;
            box-shadow: none;
            border: none;
            height: 8px;
            margin-top: 18px;
        }
        .noUi-connect {
            background: #2196f3;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(33,150,243,0.08);
        }
        .noUi-horizontal .noUi-handle {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #2196f3;
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(33,150,243,0.13);
            top: -5px;
            cursor: pointer;
            transition: box-shadow 0.2s;
        }
        .noUi-horizontal .noUi-handle:hover {
            box-shadow: 0 4px 16px rgba(33,150,243,0.18);
        }
        .noUi-handle:after, .noUi-handle:before {
            display: none;
        }
        .noUi-tooltip {
            background: #fff;
            color: #2196f3;
            border-radius: 6px;
            border: 1px solid #2196f3;
            font-size: 0.95em;
            box-shadow: 0 1px 4px rgba(33,150,243,0.08);
            padding: 2px 8px;
        }
        /* --- End noUiSlider Custom Style --- */
        @media (max-width: 900px) {
            body { padding: 10px; }
            .main-flex { flex-direction: column; gap: 20px; }
            .container { max-width: 100%; min-width: 0; padding: 18px; }
            .image-row { gap: 16px !important; }
            .letsplay-row { gap: 8px !important; }
            .letsplay-row img { width: 40px !important; height: 40px !important; }
            .letsplay-row h1 { font-size: 1.1rem !important; }
        }
        @media (max-width: 430px) {
            h2 { font-size: 1.2rem; }
            .result { font-size: 1rem; }
            button, input, textarea { font-size: 0.95rem; }
            .image-row img { width: 80px !important; height: 80px !important; }
            .letsplay-row { flex-direction: column !important; gap: 2px !important; }
            .letsplay-row img { width: 32px !important; height: 32px !important; }
            .letsplay-row h1 { font-size: 0.95rem !important; }
        }
        /* Disabled select style */
        select:disabled {
            background: #f3f3f3;
            color: #aaa;
            border-color: #ddd;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="letsplay-row" style="display:flex;align-items:center;justify-content:center;gap:16px;margin-bottom:30px;flex-wrap:wrap;">
        <div style="text-align:center;min-width:60px;">
            <img src="static/img/cute.png" alt="Cute" style="width:60px;height:60px;object-fit:cover;border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,0.13);margin-bottom:4px;">
        </div>
        <div style="flex:0 1 auto;text-align:center;min-width:180px;">
            <h1 style="font-size:2.2rem;color:#ff69b4;letter-spacing:1px;margin:0;">Let's PLAY &gt;w&lt;</h1>
        </div>
        <div style="text-align:center;min-width:60px;">
            <img src="static/img/handsome.png" alt="Handsome" style="width:60px;height:60px;object-fit:cover;border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,0.13);margin-bottom:4px;">
        </div>
    </div>
    <div class="main-flex" id="main-sections">
    <div class="container">
        <h2>Stock Price Trends</h2>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label for="stock-select" style="font-size:0.95rem;">Select companies:</label>
            <select id="stock-select" multiple size="5" style="width:100%;margin-top:5px;font-size:0.95rem;padding:6px;">
                <option value="AAPL">Apple (AAPL)</option>
                <option value="MSFT">Microsoft (MSFT)</option>
                <option value="GOOGL">Google (GOOGL)</option>
                <option value="AMZN">Amazon (AMZN)</option>
                <option value="META">Meta (META)</option>
                <option value="NVDA">Nvidia (NVDA)</option>
                <option value="TSLA">Tesla (TSLA)</option>
                <option value="NFLX">Netflix (NFLX)</option>
                <option value="AMD">AMD (AMD)</option>
                <option value="INTC">Intel (INTC)</option>
                <option value="BRK-B">Berkshire Hathaway (BRK-B)</option>
                <option value="JNJ">Johnson & Johnson (JNJ)</option>
                <option value="V">Visa (V)</option>
                <option value="JPM">JPMorgan Chase (JPM)</option>
                <option value="WMT">Walmart (WMT)</option>
                <option value="PG">Procter & Gamble (PG)</option>
                <option value="KO">Coca-Cola (KO)</option>
                <option value="XOM">Exxon Mobil (XOM)</option>
                <option value="SPY">S&P 500 ETF (SPY)</option>
                <option value="QQQ">Nasdaq 100 ETF (QQQ)</option>
                <option value="VOO">S&P 500 ETF (VOO)</option>
                <option value="ARKK">ARK Innovation ETF (ARKK)</option>
                <option value="EEM">Emerging Markets ETF (EEM)</option>
                <option value="XLF">Financial Select Sector SPDR (XLF)</option>
                <option value="ES=F">S&P 500 E-mini (ES=F)</option>
                <option value="NQ=F">Nasdaq 100 E-mini (NQ=F)</option>
                <option value="YM=F">Dow Jones E-mini (YM=F)</option>
                <option value="RTY=F">Russell 2000 E-mini (RTY=F)</option>
                <option value="MES=F">Micro E-mini S&P 500 (MES=F)</option>
                <option value="MNQ=F">Micro E-mini Nasdaq 100 (MNQ=F)</option>
                <option value="MYM=F">Micro E-mini Dow (MYM=F)</option>
                <option value="M2K=F">Micro E-mini Russell 2000 (M2K=F)</option>
                <option value="GC=F">Gold (GC=F)</option>
                <option value="SI=F">Silver (SI=F)</option>
                <option value="CL=F">Crude Oil WTI (CL=F)</option>
                <option value="BZ=F">Brent Oil (BZ=F)</option>
                <option value="NG=F">Natural Gas (NG=F)</option>
                <option value="HG=F">Copper (HG=F)</option>
                <option value="ZC=F">Corn (ZC=F)</option>
                <option value="ZS=F">Soybeans (ZS=F)</option>
                <option value="ZW=F">Wheat (ZW=F)</option>
                <option value="VX=F">VIX (VX=F)</option>
                <option value="BTC=F">Bitcoin Futures (BTC=F)</option>
                <option value="ETH=F">Ethereum Futures (ETH=F)</option>
            </select>
            <div style="margin-top:8px;">
                <label for="scale-select" style="font-size:0.95rem;">Y-Axis Scale:</label>
                <select id="scale-select" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                    <option value="linear">Linear</option>
                    <option value="logarithmic">Log</option>
                </select>
            </div>
        </div>
        <button onclick="fetchStockTrends()" style="font-size:0.98rem;padding:7px 0;">Show Stock Trends</button>
        <div id="stock-trends-result" style="margin-top:16px;font-size:0.97rem;"></div>
        <div style="width:100%;max-width:350px;margin:0 auto;">
            <canvas id="stockChartMulti" width="350" height="350" style="display:none;background:#fff;border-radius:12px;"></canvas>
        </div>
    </div>
    <div class="container">
        <h2>Largest Stock Price Change</h2>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label for="maxchange-stock-select" style="font-size:0.95rem;">Select companies:</label>
            <select id="maxchange-stock-select" multiple size="5" style="width:100%;margin-top:5px;font-size:0.95rem;padding:6px;">
                <option value="AAPL">Apple (AAPL)</option>
                <option value="MSFT">Microsoft (MSFT)</option>
                <option value="GOOGL">Google (GOOGL)</option>
                <option value="AMZN">Amazon (AMZN)</option>
                <option value="META">Meta (META)</option>
                <option value="NVDA">Nvidia (NVDA)</option>
                <option value="TSLA">Tesla (TSLA)</option>
                <option value="NFLX">Netflix (NFLX)</option>
                <option value="AMD">AMD (AMD)</option>
                <option value="INTC">Intel (INTC)</option>
                <option value="BRK-B">Berkshire Hathaway (BRK-B)</option>
                <option value="JNJ">Johnson & Johnson (JNJ)</option>
                <option value="V">Visa (V)</option>
                <option value="JPM">JPMorgan Chase (JPM)</option>
                <option value="WMT">Walmart (WMT)</option>
                <option value="PG">Procter & Gamble (PG)</option>
                <option value="KO">Coca-Cola (KO)</option>
                <option value="XOM">Exxon Mobil (XOM)</option>
                <option value="SPY">S&P 500 ETF (SPY)</option>
                <option value="QQQ">Nasdaq 100 ETF (QQQ)</option>
                <option value="VOO">S&P 500 ETF (VOO)</option>
                <option value="ARKK">ARK Innovation ETF (ARKK)</option>
                <option value="EEM">Emerging Markets ETF (EEM)</option>
                <option value="XLF">Financial Select Sector SPDR (XLF)</option>
                <option value="ES=F">S&P 500 E-mini (ES=F)</option>
                <option value="NQ=F">Nasdaq 100 E-mini (NQ=F)</option>
                <option value="YM=F">Dow Jones E-mini (YM=F)</option>
                <option value="RTY=F">Russell 2000 E-mini (RTY=F)</option>
                <option value="MES=F">Micro E-mini S&P 500 (MES=F)</option>
                <option value="MNQ=F">Micro E-mini Nasdaq 100 (MNQ=F)</option>
                <option value="MYM=F">Micro E-mini Dow (MYM=F)</option>
                <option value="M2K=F">Micro E-mini Russell 2000 (M2K=F)</option>
                <option value="GC=F">Gold (GC=F)</option>
                <option value="SI=F">Silver (SI=F)</option>
                <option value="CL=F">Crude Oil WTI (CL=F)</option>
                <option value="BZ=F">Brent Oil (BZ=F)</option>
                <option value="NG=F">Natural Gas (NG=F)</option>
                <option value="HG=F">Copper (HG=F)</option>
                <option value="ZC=F">Corn (ZC=F)</option>
                <option value="ZS=F">Soybeans (ZS=F)</option>
                <option value="ZW=F">Wheat (ZW=F)</option>
                <option value="VX=F">VIX (VX=F)</option>
                <option value="BTC=F">Bitcoin Futures (BTC=F)</option>
                <option value="ETH=F">Ethereum Futures (ETH=F)</option>
            </select>
        </div>
        <button onclick="fetchMaxChange()" style="font-size:0.98rem;padding:7px 0;">Show Largest Change Ranking</button>
        <div id="maxchange-result" style="margin-top:16px;font-size:0.97rem;"></div>
    </div>
    <div class="container">
        <h2>Stock Problems Playground</h2>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label for="lc-problem" style="font-size:0.95rem;">Select Problem:</label>
            <select id="lc-problem" style="width:100%;margin-top:5px;font-size:0.95rem;padding:6px;" onchange="updateLcInputs()">
                <option value="121">121. Best Time to Buy and Sell Stock (One transaction)</option>
                <option value="122">122. Best Time to Buy and Sell Stock II (Unlimited transactions)</option>
                <option value="123">123. Best Time to Buy and Sell Stock III (At most two transactions)</option>
                <option value="188">188. Best Time to Buy and Sell Stock IV (At most k transactions)</option>
                <option value="309">309. Best Time to Buy and Sell Stock with Cooldown</option>
                <option value="714">714. Best Time to Buy and Sell Stock with Transaction Fee</option>
            </select>
        </div>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label for="lc-prices" style="font-size:0.95rem;">Prices (comma-separated):</label>
            <input id="lc-prices" type="text" style="width:100%;font-size:0.95rem;padding:6px;" placeholder="e.g. 7,1,5,3,6,4">
        </div>
        <div id="lc-k-div" style="margin-bottom:10px;display:none;font-size:0.95rem;">
            <label for="lc-k" style="font-size:0.95rem;">k (number of transactions):</label>
            <input id="lc-k" type="number" min="1" max="10" value="2" style="width:100px;font-size:0.95rem;padding:6px;">
        </div>
        <div id="lc-fee-div" style="margin-bottom:10px;display:none;font-size:0.95rem;">
            <label for="lc-fee" style="font-size:0.95rem;">Transaction Fee:</label>
            <input id="lc-fee" type="number" min="0" value="0" style="width:100px;font-size:0.95rem;padding:6px;">
        </div>
        <button onclick="solveLcStock()" style="font-size:0.98rem;padding:7px 0;">Calculate</button>
        <div style="margin-top:10px;text-align:center;">
            <div id="lc-code-toggle" style="display:inline-block;background:#f7f7f7;border-radius:6px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,0.04);margin-bottom:8px;">
                <button id="btn-py" onclick="setLcCodeLang('py')" style="border:none;background:#ff69b4;color:#fff;padding:6px 18px;font-size:1rem;cursor:pointer;outline:none;">Python</button>
                <button id="btn-cpp" onclick="setLcCodeLang('cpp')" style="border:none;background:#eee;color:#333;padding:6px 18px;font-size:1rem;cursor:pointer;outline:none;">C++</button>
            </div>
        </div>
        <div id="lc-result" style="margin-top:8px;font-size:0.97rem;"></div>
    </div>
    <div class="container">
        <h2>Find the Most Stable Stock</h2>
        <div style="margin-bottom:10px;font-size:0.97rem;color:#444;background:#f7f7fa;padding:10px 14px 10px 14px;border-radius:7px;margin-bottom:18px;line-height:1.6;">
            <b>How to use:</b> <br>
            1. Choose a <b>Stability Metric</b>, <b>Time Range</b>, and <b>Window Size</b>.<br>
            2. Click <b>Find Most Stable Stocks</b> to see the top results.<br>
            3. Use the <b>slider</b> in each result card to analyze different windows and see their scores.<br>
            <span style="color:#888;font-size:0.95em;">Tip: You can compare different metrics, time ranges, and window sizes for deeper insights.</span>
        </div>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label style="font-size:0.95rem;">Stability Metric:</label>
            <select id="stable-metric" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                <option value="std">Lowest Standard Deviation (Most Stable)</option>
                <option value="meanabs">Lowest Mean Absolute Change (Most Stable)</option>
                <option value="maxstd">Highest Standard Deviation (Most Unstable)</option>
                <option value="maxmeanabs">Highest Mean Absolute Change (Most Unstable)</option>
            </select>
            <label style="margin-left:18px;font-size:0.95rem;">Time Range:</label>
            <select id="stable-range" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                <option value="90">3 months</option>
                <option value="180">6 months</option>
                <option value="365">1 year</option>
                <option value="730">2 years</option>
                <option value="1095" selected>3 years</option>
            </select>
            <label style="margin-left:18px;font-size:0.95rem;">Window Size:</label>
            <select id="stable-window" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                <option value="5">5 days</option>
                <option value="10">10 days</option>
                <option value="20" selected>20 days</option>
                <option value="30">30 days</option>
                <option value="60">60 days</option>
            </select>
        </div>
        <button onclick="fetchStableChange()" style="font-size:0.98rem;padding:7px 0;">Find Most Stable Stocks</button>
        <div id="stable-cards" style="margin-top:16px;"></div>
    </div>
    <div class="container">
        <h2>Stock Stability Explorer</h2>
        <div style="margin-bottom:10px;font-size:0.97rem;color:#444;background:#f7f7fa;padding:10px 14px 10px 14px;border-radius:7px;margin-bottom:18px;line-height:1.6;">
            <b>How to use:</b> <br>
            1. Select <b>Stock</b>, <b>Time Range</b>, and <b>Window Size</b> first.<br>
            2. Then choose a <b>Stability Metric</b> to see the most stable/unstable period.<br>
            3. Use the <b>slider</b> below the chart to explore other windows and see their scores.<br>
            <span style="color:#888;font-size:0.95em;">Tip: The metric dropdown will unlock after you make all three selections above.</span>
        </div>
        <div style="margin-bottom:10px;font-size:0.95rem;">
            <label for="explore-stock" style="font-size:0.95rem;">Select a Stock:</label>
            <select id="explore-stock" style="margin-left:8px;font-size:0.95rem;padding:4px;min-width:160px;"></select>
            <label style="margin-left:18px;font-size:0.95rem;">Stability Metric:</label>
            <select id="explore-metric" style="margin-left:8px;font-size:0.95rem;padding:4px;" disabled>
                <option value="std">Lowest Standard Deviation</option>
                <option value="meanabs">Lowest Mean Absolute Change</option>
                <option value="maxstd">Highest Standard Deviation (Most Unstable)</option>
                <option value="maxmeanabs">Highest Mean Absolute Change (Most Unstable)</option>
            </select>
            <label style="margin-left:18px;font-size:0.95rem;">Time Range:</label>
            <select id="explore-range" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                <option value="90">3 months</option>
                <option value="180">6 months</option>
                <option value="365">1 year</option>
                <option value="730">2 years</option>
                <option value="1095" selected>3 years</option>
            </select>
            <label style="margin-left:18px;font-size:0.95rem;">Window Size:</label>
            <select id="explore-window" style="margin-left:8px;font-size:0.95rem;padding:4px;">
                <option value="5">5 days</option>
                <option value="10">10 days</option>
                <option value="20" selected>20 days</option>
                <option value="30">30 days</option>
                <option value="60">60 days</option>
            </select>
        </div>
        <div id="explore-card" style="margin-top:16px;"></div>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
    <script src="static/main.js"></script>
</body>
</html> 