<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tokimeki</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <style>
        body, .card-title, .form-label, .card-body, .card-section-vertical, .mb-2, .mb-3, .mb-4, .market-controls, .explore-controls, .poetry-controls, .d3-tooltip, .chart-area, .container, .row, .col-12, .d-flex, .text-center, .text-muted, .fs-6 {
            font-family: 'Inter', 'Roboto', Arial, sans-serif !important;
            color: #183153 !important;
            font-size: 1rem;
        }
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #183153 !important;
            letter-spacing: 0.01em;
            text-align: left;
            margin-bottom: 0;
            line-height: 1.1;
            text-transform: none;
            white-space: nowrap;
        }
        .form-label {
            color: #183153 !important;
            font-weight: 500;
            font-size: 1rem;
            margin-bottom: 0;
            white-space: nowrap;
        }
        .d3-tooltip {
            color: #183153 !important;
            font-size: 1rem;
        }
        body { font-family: Inter, Roboto, Arial, sans-serif; background: #fff; color: #222; }
        .container { max-width: 900px; margin: 0 auto; padding-top: 2.5rem; }
        .letsplay-row img { width: 60px; height: 60px; object-fit: cover; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.13); margin-bottom: 4px; }
        .letsplay-row h1 { font-size: 1.5rem; color: #183153; letter-spacing: 0.5px; margin: 0; font-weight: 700; }
        .noUi-target { background: #e0e0e0; border-radius: 8px; border: none; height: 8px; margin-top: 18px; }
        .noUi-connect { background: #183153; border-radius: 8px; }
        .noUi-horizontal .noUi-handle { width: 18px; height: 18px; border-radius: 50%; background: #183153; border: 2px solid #fff; top: -5px; cursor: pointer; }
        .noUi-tooltip { background: #fff; color: #183153; border-radius: 6px; border: 1px solid #183153; font-size: 0.95em; padding: 2px 8px; }
        select:disabled { background: #f3f3f3; color: #aaa; border-color: #ddd; cursor: not-allowed; }
        .row.g-4 { gap: 1.5rem 0; flex-direction: column; }
        .card { min-height: 100%; background: #fff; border: 1px solid #e0e0e0; box-shadow: 0 2px 16px rgba(16,26,43,0.07); border-radius: 14px; padding: 1.2rem 1.2rem 1.2rem 1.2rem; display: flex; flex-direction: column; justify-content: stretch; margin-bottom: 0.6rem; }
        .card-header-row { display: flex; flex-wrap: wrap; align-items: center; gap: 1.1rem; margin-bottom: 0.7rem; }
        .card-section-vertical { display: flex; flex-direction: column; gap: 0.4rem; }
        .chart-area {
            background: #fff;
            border-radius: 12px;
            padding: 1.2rem 1.2rem 1.2rem 1.2rem;
            min-width: 320px;
            width: 100%;
            max-width: 900px;
            height: 340px;
            aspect-ratio: unset;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0 auto;
        }
        #d3-stock-chart, #volatility-correlation-chart {
            width: 100%;
            height: 100%;
            min-height: 0;
            min-width: 0;
            max-width: 100%;
            margin: 0 auto;
            overflow-x: auto;
            background: transparent;
        }
        .market-controls, .explore-controls, .poetry-controls { display: flex; flex-wrap: wrap; align-items: center; gap: 0.7rem; margin-bottom: 0; }
        .btn-dark-bbg { background: #183153; color: #fff; font-weight: 500; border: none; font-size: 1rem; padding: 0.38rem 1.1rem; }
        .btn-dark-bbg:hover { background: #27457c; color: #fff; }
        .btn-outline-secondary { border-color: #183153; color: #183153; background: transparent; font-size: 1rem; padding: 0.38rem 1.1rem; }
        .btn-outline-secondary:hover { background: #183153; color: #fff; }
        .form-select, .form-control { background: #fff; color: #222; border: 1px solid #ccc; font-size: 1rem; }
        .form-select:focus, .form-control:focus { border-color: #183153; box-shadow: 0 0 0 2px #18315333; }
        .mb-2, .mb-3, .mb-4 { margin-bottom: 0.7rem !important; }
        .mb-4 { margin-bottom: 1.1rem !important; }
        .d-flex.align-items-end.gap-2 { gap: 0.3rem; }
        .row.g-4 > [class^='col-'] { display: flex; flex-direction: column; }
        .card-body { flex: 1 1 auto; display: flex; flex-direction: column; padding: 0.6rem 1rem 0.6rem 1rem; }
        .divider { display: none; }
        @media (max-width: 991px) {
            .container { padding: 0.5rem; }
            .card-header-row, .market-controls, .explore-controls, .poetry-controls { flex-direction: column; align-items: flex-start; gap: 0.3rem; }
            .chart-area {
                min-width: 0;
                max-width: 100%;
                width: 100%;
                height: 220px;
                padding: 0.7rem;
            }
        }
        .col-12.d-flex + .col-12.d-flex { margin-top: -0.2rem; }
        #main-nav .nav-link {
            color: #183153;
            font-weight: 500;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
        }
        #main-nav .nav-link.active,
        #main-nav .nav-link:hover {
            background-color: #183153;
            color: #fff;
        }
        #left-nav-container {
            background-color: #f8f9fa;
            padding: 1rem;
            border-right: 1px solid #dee2e6;
            height: 100vh;
            position: sticky;
            top: 0;
        }
        .tab-content > .tab-pane {
            display: none;
        }
        .tab-content > .active {
            display: block;
        }

        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted #000;
        }

        .tooltip-text {
            visibility: hidden;
            width: 280px;
            background-color: #183153;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.95rem;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2" id="left-nav-container">
                <div class="letsplay-row d-flex align-items-center justify-content-between gap-2 mb-4">
                    <img src="static/img/cute.png" alt="Cute" style="width: 40px; height: 40px; border-radius: 10px;">
                    <h4 class="mb-0" style="font-weight: 700;">Tokimeki</h4>
                    <img src="static/img/handsome.png" alt="Handsome" style="width: 40px; height: 40px; border-radius: 10px;">
                </div>

                <ul class="nav flex-column nav-pills" id="main-nav" role="tablist" aria-orientation="vertical">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="market-overtime-tab" data-bs-toggle="pill" data-bs-target="#market-overtime-content" role="tab" aria-controls="market-overtime-content" aria-selected="true">Market Overtime</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="volatility-explorer-tab" data-bs-toggle="pill" data-bs-target="#volatility-explorer-content" role="tab" aria-controls="volatility-explorer-content" aria-selected="false">Volatility Explorer</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="tweet-sentiment-tab" data-bs-toggle="pill" data-bs-target="#tweet-sentiment-content" role="tab" aria-controls="tweet-sentiment-content" aria-selected="false">Tweet Sentiment</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="speech-analysis-tab" data-bs-toggle="pill" data-bs-target="#speech-analysis-content" role="tab" aria-controls="speech-analysis-content" aria-selected="false">Financial Q&A</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="hf-signal-tool-tab" data-bs-toggle="pill" data-bs-target="#hf-signal-tool-content" role="tab" aria-controls="hf-signal-tool-content" aria-selected="false">Trading Strategy Analyzer</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="investment-playbooks-tab" data-bs-toggle="pill" data-bs-target="#investment-playbooks-content" role="tab" aria-controls="investment-playbooks-content" aria-selected="false">Investment Playbooks</a>
                    </li>
                </ul>
            </div>

            <div class="col-md-10 py-4">
                <div class="tab-content" id="main-tab-content">
                    <div class="tab-pane fade show active" id="market-overtime-content" role="tabpanel" aria-labelledby="market-overtime-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column">
                            <div class="card-body d-flex flex-column">
                                <div class="card-header-row flex-column align-items-stretch" style="gap:0.5rem;">
                                    <div class="card-title" style="font-size:1.1rem;font-weight:600;color:#183153;">Market Overtime</div>
                                    <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
                                        <div id="react-stock-select"></div>
                                        <label for="stock-select" class="form-label">Select companies:</label>
                                        <select id="stock-select" class="form-select" multiple>
                                            <option value="AAPL">Apple (AAPL)</option>
                                            <option value="MSFT">Microsoft (MSFT)</option>
                                            <option value="GOOGL">Google (GOOGL)</option>
                                            <option value="AMZN">Amazon (AMZN)</option>
                                            <option value="META">Meta (META)</option>
                                            <option value="NVDA">Nvidia (NVDA)</option>
                                            <option value="TSLA">Tesla (TSLA)</option>
                                            <option value="NFLX">Netflix (NFLX)</option>
                                            <option value="AMD">AMD (AMD)</option>
                                            <option value="INTC">Intel (INTC)</option>
                                            <option value="BRK-B">Berkshire Hathaway (BRK-B)</option>
                                            <option value="JNJ">Johnson & Johnson (JNJ)</option>
                                            <option value="V">Visa (V)</option>
                                            <option value="JPM">JPMorgan Chase (JPM)</option>
                                            <option value="WMT">Walmart (WMT)</option>
                                            <option value="PG">Procter & Gamble (PG)</option>
                                            <option value="KO">Coca-Cola (KO)</option>
                                            <option value="XOM">Exxon Mobil (XOM)</option>
                                            <option value="SPY">S&P 500 ETF (SPY)</option>
                                            <option value="QQQ">Nasdaq 100 ETF (QQQ)</option>
                                            <option value="VOO">S&P 500 ETF (VOO)</option>
                                            <option value="ARKK">ARK Innovation ETF (ARKK)</option>
                                            <option value="EEM">Emerging Markets ETF (EEM)</option>
                                            <option value="XLF">Financial Select Sector SPDR (XLF)</option>
                                            <option value="ES=F">S&P 500 E-mini (ES=F)</option>
                                            <option value="NQ=F">Nasdaq 100 E-mini (NQ=F)</option>
                                            <option value="YM=F">Dow Jones E-mini (YM=F)</option>
                                            <option value="RTY=F">Russell 2000 E-mini (RTY=F)</option>
                                            <option value="MES=F">Micro E-mini S&P 500 (MES=F)</option>
                                            <option value="MNQ=F">Micro E-mini Nasdaq 100 (MNQ=F)</option>
                                            <option value="MYM=F">Micro E-mini Dow (MYM=F)</option>
                                            <option value="M2K=F">Micro E-mini Russell 2000 (M2K=F)</option>
                                            <option value="GC=F">Gold (GC=F)</option>
                                            <option value="SI=F">Silver (SI=F)</option>
                                            <option value="CL=F">Crude Oil WTI (CL=F)</option>
                                            <option value="BZ=F">Brent Oil (BZ=F)</option>
                                            <option value="NG=F">Natural Gas (NG=F)</option>
                                            <option value="HG=F">Copper (HG=F)</option>
                                            <option value="ZC=F">Corn (ZC=F)</option>
                                            <option value="ZS=F">Soybeans (ZS=F)</option>
                                            <option value="ZW=F">Wheat (ZW=F)</option>
                                            <option value="VX=F">VIX (VX=F)</option>
                                            <option value="BTC=F">Bitcoin Futures (BTC=F)</option>
                                            <option value="ETH=F">Ethereum Futures (ETH=F)</option>
                                        </select>
                                    </div>
                                    <div class="d-flex flex-wrap align-items-center gap-3 mb-2">
                                    </div>
                                    <div id="market-legend" class="mb-2" style="font-size:1rem;color:#183153;font-weight:500;"></div>
                                </div>
                                <div class="card-section-vertical">
                                    <div id="stock-trends-result" class="mb-2"></div>
                                    <div class="chart-area"><div id="d3-stock-chart"></div></div>
                                    <div class="mb-2" style="width:100%;max-width:700px;">
                                        <div id="market-slider"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="volatility-explorer-content" role="tabpanel" aria-labelledby="volatility-explorer-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column">
                            <div class="card-body d-flex flex-column">
                                <div class="card-header-row">
                                    <span class="card-title">Volatility Explorer</span>
                                </div>
                                <div class="card-section-vertical">
                                    <div class="mb-2" style="color:#183153;font-size:1.04rem;">
                                        <span style="font-size:1.1rem;">ðŸ“ˆ <b>Rolling volatility</b> reveals when the stock experienced sharp price movements.</span>
                                    </div>
                                    <div class="d-flex flex-wrap align-items-center gap-2 mb-2" id="volatility-controls">
                                        <label for="vol-window" class="form-label mb-0">Rolling Window (days):</label>
                                        <input type="number" id="vol-window" class="form-control w-auto" value="10" min="1" style="max-width:80px;">
                                        <label for="vol-years" class="form-label mb-0">Time Range (years):</label>
                                        <input type="number" id="vol-years" class="form-control w-auto" value="2" min="1" style="max-width:80px;">
                                        <button type="button" onclick="fetchAndRenderVolatilityCorrelation()" class="btn btn-dark-bbg">Fetch & Visualize</button>
                                    </div>
                                    <div class="chart-area"><div id="volatility-correlation-chart"></div></div>
                                    <div class="mb-2" style="width:100%;max-width:700px;">
                                        <div id="volatility-range-slider"></div>
                                        <div class="d-flex justify-content-between mt-1">
                                            <span id="volatility-range-start" style="font-size:0.98rem;"></span>
                                            <span id="volatility-range-end" style="font-size:0.98rem;"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tweet-sentiment-content" role="tabpanel" aria-labelledby="tweet-sentiment-tab">
                        <div class="container py-4"><div id="react-tweet-sentiment"></div></div>
                    </div>
                    <div class="tab-pane fade" id="speech-analysis-content" role="tabpanel" aria-labelledby="speech-analysis-tab">
                        <div class="container py-4"><div id="react-speech-recorder"></div></div>
                    </div>
                    <div class="tab-pane fade" id="hf-signal-tool-content" role="tabpanel" aria-labelledby="hf-signal-tool-tab">
                        <div class="container py-4"><div id="react-hedge-fund-tool"></div></div>
                    </div>
                    <div class="tab-pane fade" id="investment-playbooks-content" role="tabpanel" aria-labelledby="investment-playbooks-tab">
                        <div class="container py-4"><div id="react-investment-playbooks-tool"></div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="static/main.js"></script>
</body>
</html> 