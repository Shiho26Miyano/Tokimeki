<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta name="version" content="20250117-1704067200">
    <meta name="last-modified" content="2025-01-17">
    <title>Tokimeki - AI-Powered Investment Analysis Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
    <style>
        body, .card-title, .form-label, .card-body, .card-section-vertical, .mb-2, .mb-3, .mb-4, .market-controls, .explore-controls, .poetry-controls, .d3-tooltip, .chart-area, .container, .row, .col-12, .d-flex, .text-center, .text-muted, .fs-6 {
            font-family: 'Inter', 'Roboto', Arial, sans-serif !important;
            color: #183153 !important;
            font-size: 1rem;
        }
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #183153 !important;
            letter-spacing: 0.01em;
            text-align: left;
            margin-bottom: 0;
            line-height: 1.1;
            text-transform: none;
            white-space: nowrap;
        }
        .form-label {
            color: #183153 !important;
            font-weight: 500;
            font-size: 1rem;
            margin-bottom: 0;
            white-space: nowrap;
        }
        .d3-tooltip {
            color: #183153 !important;
            font-size: 1rem;
        }
        body { font-family: Inter, Roboto, Arial, sans-serif; background: #fff; color: #222; }
        .container { max-width: 900px; margin: 0 auto; padding-top: 2.5rem; }
        .letsplay-row img { width: 60px; height: 60px; object-fit: cover; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.13); margin-bottom: 4px; }
        .letsplay-row h1 { font-size: 1.5rem; color: #183153; letter-spacing: 0.5px; margin: 0; font-weight: 700; }
        .noUi-target { background: #e0e0e0; border-radius: 8px; border: none; height: 8px; margin-top: 18px; }
        .noUi-connect { background: #183153; border-radius: 8px; }
        .noUi-horizontal .noUi-handle { width: 18px; height: 18px; border-radius: 50%; background: #183153; border: 2px solid #fff; top: -5px; cursor: pointer; }
        .noUi-tooltip { background: #fff; color: #183153; border-radius: 6px; border: 1px solid #183153; font-size: 0.95em; padding: 2px 8px; }
        select:disabled { background: #f3f3f3; color: #aaa; border-color: #ddd; cursor: not-allowed; }
        .row.g-4 { gap: 1.5rem 0; flex-direction: column; }
        .card { min-height: 100%; background: #fff; border: 1px solid #e0e0e0; box-shadow: 0 2px 16px rgba(16,26,43,0.07); border-radius: 14px; padding: 1.2rem 1.2rem 1.2rem 1.2rem; display: flex; flex-direction: column; justify-content: stretch; margin-bottom: 0.6rem; }
        .card-header-row { display: flex; flex-wrap: wrap; align-items: center; gap: 1.1rem; margin-bottom: 0.7rem; }
        .card-section-vertical { display: flex; flex-direction: column; gap: 0.4rem; }
        .chart-area {
            background: #fff;
            border-radius: 12px;
            padding: 1.2rem 1.2rem 1.2rem 1.2rem;
            min-width: 320px;
            width: 100%;
            max-width: 900px;
            height: 340px;
            aspect-ratio: unset;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0 auto;
        }
        #d3-stock-chart, #volatility-correlation-chart {
            width: 100%;
            height: 100%;
            min-height: 0;
            min-width: 0;
            max-width: 100%;
            margin: 0 auto;
            overflow-x: auto;
            background: transparent;
        }
        .market-controls, .explore-controls, .poetry-controls { display: flex; flex-wrap: wrap; align-items: center; gap: 0.7rem; margin-bottom: 0; }
        .btn-dark-bbg { background: #183153; color: #fff; font-weight: 500; border: none; font-size: 1rem; padding: 0.38rem 1.1rem; }
        .btn-dark-bbg:hover { background: #27457c; color: #fff; }
        .btn-outline-secondary { border-color: #183153; color: #183153; background: transparent; font-size: 1rem; padding: 0.38rem 1.1rem; }
        .btn-outline-secondary:hover { background: #183153; color: #fff; }
        .form-select, .form-control { background: #fff; color: #222; border: 1px solid #ccc; font-size: 1rem; }
        .form-select:focus, .form-control:focus { border-color: #183153; box-shadow: 0 0 0 2px #18315333; }
        .mb-2, .mb-3, .mb-4 { margin-bottom: 0.7rem !important; }
        .mb-4 { margin-bottom: 1.1rem !important; }
        .d-flex.align-items-end.gap-2 { gap: 0.3rem; }
        .row.g-4 > [class^='col-'] { display: flex; flex-direction: column; }
        .card-body { flex: 1 1 auto; display: flex; flex-direction: column; padding: 0.6rem 1rem 0.6rem 1rem; }
        .divider { display: none; }
        @media (max-width: 991px) {
            .container { padding: 0.5rem; }
            .card-header-row, .market-controls, .explore-controls, .poetry-controls { flex-direction: column; align-items: flex-start; gap: 0.3rem; }
            .chart-area {
                min-width: 0;
                max-width: 100%;
                width: 100%;
                height: 220px;
                padding: 0.7rem;
            }
        }
        .col-12.d-flex + .col-12.d-flex { margin-top: -0.2rem; }
        
        /* Tech Stack Card Styles */
        .tech-badge {
            text-align: center;
        }
        
        .tech-badge .badge {
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
            width: 100%;
            display: block;
        }
        
        .card.border-primary {
            box-shadow: 0 2px 8px rgba(0,123,255,0.1);
            transition: all 0.3s ease;
        }
        
        .card.border-primary:hover {
            box-shadow: 0 4px 16px rgba(0,123,255,0.2);
            transform: translateY(-2px);
        }
        
        #main-nav .nav-link {
            color: #183153;
            font-weight: 500;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
        }
        #main-nav .nav-link.active,
        #main-nav .nav-link:hover {
            background-color: #183153;
            color: #fff;
        }
        #left-nav-container {
            background-color: #f8f9fa;
            padding: 1rem;
            border-right: 1px solid #dee2e6;
            height: 100vh;
            position: sticky;
            top: 0;
        }
        .tab-content > .tab-pane {
            display: none;
        }
        .tab-content > .active {
            display: block;
        }

        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted #000;
        }

        .tooltip-text {
            visibility: hidden;
            width: 280px;
            background-color: #183153;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.95rem;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Chat styles */
        #chat-messages {
            background: #f8f9fa;
            border: 1px solid #e0e0e0 !important;
            border-radius: 12px !important;
        }
        
        #chat-messages .message-content {
            border-radius: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        #chat-messages .user-message {
            background-color: #183153;
            color: white;
            padding: 8px 16px;
            margin: 4px 0;
            border-radius: 12px 12px 2px 12px;
        }
        
        #chat-messages .ai-message {
            background-color: white;
            color: #183153;
            padding: 8px 16px;
            margin: 4px 0;
            border-radius: 12px 12px 12px 2px;
        }
        
        #chat-messages .ai-message pre {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            overflow-x: auto;
        }
        
        #chat-messages .ai-message code {
            background: #f8f9fa;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        #chat-input {
            border-radius: 20px;
            padding: 8px 16px;
            border: 1px solid #e0e0e0;
            transition: border-color 0.2s;
        }
        
        #chat-input:focus {
            border-color: #183153;
            box-shadow: 0 0 0 2px rgba(24, 49, 83, 0.1);
        }
        
        #send-message {
            border-radius: 20px;
            padding: 8px 24px;
        }
        
        #ai-model-select {
            border-radius: 8px;
            padding: 6px 12px;
            border: 1px solid #e0e0e0;
            background-color: #f8f9fa;
            color: #183153;
            font-size: 0.9rem;
        }
        
        .thinking-indicator {
            color: #6c757d;
            font-style: italic;
            padding: 8px 16px;
            background: rgba(24, 49, 83, 0.05);
            border-radius: 12px;
            margin: 4px 0;
        }
        
        /* Chart container fixes */
        #fq-price-chart, #fq-performance-chart, #fq-distribution-chart {
            max-height: 100% !important;
            max-width: 100% !important;
            height: auto !important;
            width: auto !important;
        }
        
        .card-body canvas {
            display: block !important;
            max-height: 300px !important;
            max-width: 100% !important;
        }
        
        #fq-price-chart {
            max-height: 300px !important;
        }
        
        #fq-performance-chart {
            max-height: 250px !important;
        }
        
        #fq-distribution-chart {
            max-height: 300px !important;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2" id="left-nav-container">
                <div class="letsplay-row d-flex align-items-center justify-content-between gap-2 mb-4">
                    <img src="static/img/cute.png" alt="Cute" style="width: 40px; height: 40px; border-radius: 10px;">
                    <h4 class="mb-0" style="font-weight: 700;">Tokimeki</h4>
                    <img src="static/img/handsome.png" alt="Handsome" style="width: 40px; height: 40px; border-radius: 10px;">
                </div>

                <ul class="nav flex-column nav-pills" id="main-nav" role="tablist" aria-orientation="vertical">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="futurequant-dashboard-tab" data-bs-toggle="pill" data-bs-target="#futurequant-dashboard-content" role="tab" aria-controls="futurequant-dashboard-content" aria-selected="true">ðŸ“Š FutureQuant Trader</a>
                    </li>

                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="rag-bi-tab" data-bs-toggle="pill" data-bs-target="#rag-bi-content" role="tab" aria-controls="rag-bi-content" aria-selected="false">ðŸ“š RAG Business Intelligence</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="deepseek-chatbot-tab" data-bs-toggle="pill" data-bs-target="#deepseek-chatbot-content" role="tab" aria-controls="deepseek-chatbot-content" aria-selected="false">ðŸ¤– Chatbot</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="ai-platform-comparables-tab" data-bs-toggle="pill" data-bs-target="#ai-platform-comparables-content" role="tab" aria-controls="ai-platform-comparables-content" aria-selected="false">ðŸ¤– AI Platform Comparables</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="market-overtime-tab" data-bs-toggle="pill" data-bs-target="#market-overtime-content" role="tab" aria-controls="market-overtime-content" aria-selected="false">ðŸ“ˆ Market Overtime</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="volatility-explorer-tab" data-bs-toggle="pill" data-bs-target="#volatility-explorer-content" role="tab" aria-controls="volatility-explorer-content" aria-selected="false">ðŸ“Š Volatility Explorer</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="hf-signal-tool-tab" data-bs-toggle="pill" data-bs-target="#hf-signal-tool-content" role="tab" aria-controls="hf-signal-tool-content" aria-selected="false">âš¡ Trading Strategy Analyzer</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="mnq-dashboard-tab" data-bs-toggle="pill" data-bs-target="#mnq-dashboard-content" role="tab" aria-controls="mnq-dashboard-content" aria-selected="false">ðŸ§ª Experimental Trading Hub</a>
                    </li>
                </ul>


                </ul>
            </div>

            <div class="col-md-10 py-4">
                <div class="tab-content" id="main-tab-content">
                    <div class="tab-pane fade show active" id="futurequant-dashboard-content" role="tabpanel" aria-labelledby="futurequant-dashboard-tab">
                        <div id="futurequant-dashboard-root">
                            <!-- Compact Header -->
                            <div class="card shadow-sm mb-3">
                                <div class="card-body py-3">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h3 class="mb-1">
                                                <i class="fas fa-chart-line text-primary"></i> 
                                                FutureQuant Trader
                                            </h3>
                                            <p class="text-muted mb-0 small">Futures Trading Platform</p>
                                            
                                                                        <!-- Quick Guide -->
                            <div class="alert alert-info mt-2 mb-0 py-2 small">
                                <i class="fas fa-info-circle"></i> <strong>Quick Start:</strong> 
                                <strong>Symbol</strong> â†’ <strong>Strategy</strong> â†’ <strong>Train</strong> or <strong>Trade</strong>
                            </div>
                            
                            <!-- Backend Algorithm Info -->
                            <div class="alert alert-secondary mt-2 mb-0 py-2 small">
                                <i class="fas fa-microchip"></i> <strong>AI Engine:</strong> 
                                <span class="text-muted">ML models learn from market data to predict price movements using technical analysis</span>
                            </div>
                            
                            <!-- Academic Citation -->
                            <div class="alert alert-info mt-2 mb-0 py-2 small">
                                <i class="fas fa-graduation-cap"></i> <strong>Performance:</strong> 
                                <span class="text-muted">Based on </span>
                                <a href="https://arxiv.org/abs/2505.05595" target="_blank" class="text-decoration-none fw-bold">
                                    FutureQuant Transformer
                                </a>
                                <span class="text-muted">: 0.1193% avg gain per 30-min trade</span>
                            </div>
                            
                            <!-- Data Source Information -->
                            <div class="alert alert-info mt-2 mb-0 py-2 small">
                                <i class="fas fa-clock"></i> <strong>Data Source:</strong> 
                                <span class="text-muted">Yahoo Finance via yfinance - US market hours (9:30-4:00 ET)</span>
                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="d-flex gap-2 justify-content-end">
                                                <!-- Technical Stack Card -->
                                                <div class="card border-primary h-100" style="min-width: 200px;">
                                                    <div class="card-header bg-primary text-white text-center py-2">
                                                        <h6 class="mb-0">
                                                            <i class="fas fa-cogs"></i> FutureQuant Tech Stack
                                                        </h6>
                                                    </div>
                                                                        <div class="card-body py-2">
                        <div class="row">
                            <div class="col-6">
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-primary">NumPy</span>
                                </div>
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-primary">Pandas</span>
                                </div>
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-info">QuantLib</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-success">PyTorch</span>
                                </div>
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-success">Real-time</span>
                                </div>
                                <div class="tech-badge mb-1">
                                    <span class="badge bg-warning">BRPC</span>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-12">
                                <div class="tech-badge">
                                    <span class="badge bg-dark">ML + Risk Mgmt</span>
                                </div>
                            </div>
                        </div>
                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Compact Controls Row -->
                            <div class="row mb-3">
                                <div class="col-md-2">
                                    <label class="form-label small mb-1">Symbol</label>
                                    <select class="form-select form-select-sm" id="fq-symbol-select"
                                            data-bs-toggle="tooltip" data-bs-placement="top" 
                                            title="Futures contract symbols (ES=S&P500, NQ=Nasdaq, YM=Dow)">
                                        <option value="">Select</option>
                                    </select>
                                    <small class="text-muted d-block mt-1">ES, NQ, YM</small>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small mb-1">Strategy</label>
                                    <select class="form-select form-select-sm" id="fq-strategy-select"
                                            data-bs-toggle="tooltip" data-bs-placement="top" 
                                            title="Trading strategy based on risk tolerance and market approach">
                                        <option value="">Aggressive Mean Reversion</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small mb-1">Timeframe</label>
                                    <select class="form-select form-select-sm" id="fq-timeframe-select">
                                        <option value="1d">1D</option>
                                        <option value="1h">1H</option>
                                        <option value="15m">15M</option>
                                        <option value="5m">5M</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small mb-1">Price</label>
                                    <div class="text-primary fw-bold" id="fq-current-price">$0.00</div>
                                    <small class="text-muted" id="fq-price-change">+0.00%</small>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small mb-1">Volume</label>
                                    <div class="text-info fw-bold" id="fq-volume">0</div>
                                    <small class="text-muted">Contracts</small>
                                </div>
                                <div class="col-md-2 d-flex align-items-end">
                                    <div class="d-grid gap-1 w-100">
                                        <button class="btn btn-primary btn-sm" id="fq-train-model-btn"
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Train AI models using historical data to predict market movements">
                                            <i class="fas fa-brain"></i> Train
                                        </button>
                                        <button class="btn btn-success btn-sm" id="fq-start-paper-trading-btn"
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Start paper trading session to test strategies with virtual money">
                                            <i class="fas fa-play"></i> Trade
                                        </button>
                                        <div class="text-center mt-1">
                                            <small class="text-info">
                                                <i class="fas fa-download"></i> Data: Click to Fetch
                                            </small>
                                            <br>
                                            <small class="text-warning">
                                                <i class="fas fa-cogs"></i> Features: Click to Compute
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Charts Row -->
                            <div class="row mb-3">
                                <div class="col-md-8">
                                    <div class="card">
                                        <div class="card-header py-2">
                                            <h6 class="mb-0">Price Chart</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <canvas id="fq-price-chart" height="250" style="max-height: 250px; width: 100%;"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header py-2">
                                            <h6 class="mb-0">Distribution</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <canvas id="fq-distribution-chart" height="250" style="max-height: 250px; width: 100%;"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- What Happens When You Click Section -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header py-2">
                                            <h6 class="mb-0"><i class="fas fa-question-circle text-info"></i> What Happens When You Click...</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="border-end pe-3">
                                                        <h6 class="text-primary"><i class="fas fa-brain"></i> Train Button</h6>
                                                        <ul class="small text-muted mb-0">
                                                            <li>Opens model training interface</li>
                                                            <li>Uses historical data to build AI models</li>
                                                            <li>Creates predictive algorithms for trading</li>
                                                            <li>Shows training progress and results</li>
                                                            <li>Models can be used for backtesting</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="ps-3">
                                                        <h6 class="text-success"><i class="fas fa-play"></i> Trade Button</h6>
                                                        <ul class="small text-muted mb-0">
                                                            <li>Starts paper trading session</li>
                                                            <li>Uses virtual money (no real risk)</li>
                                                            <li>Applies selected strategy automatically</li>
                                                            <li>Shows real-time position updates</li>
                                                            <li>Track performance and P&L</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            
                            <!-- Workflow Guide -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="card border-info">
                                        <div class="card-header py-2 bg-info text-white">
                                            <h6 class="mb-0"><i class="fas fa-lightbulb"></i> Trading Workflow</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row text-center">
                                                <div class="col-md-3">
                                                    <div class="border rounded p-2 bg-light">
                                                        <i class="fas fa-download text-primary fa-2x mb-2"></i>
                                                        <h6 class="mb-1">1. Get Data</h6>
                                                        <small class="text-muted">Download market data</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="border rounded p-2 bg-light">
                                                        <i class="fas fa-cogs text-success fa-2x mb-2"></i>
                                                        <h6 class="mb-1">2. Build Features</h6>
                                                        <small class="text-muted">Calculate indicators</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="border rounded p-2 bg-light">
                                                        <i class="fas fa-brain text-primary fa-2x mb-2"></i>
                                                        <h6 class="mb-1">3. Train Models</h6>
                                                        <small class="text-muted">AI learns patterns</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="border rounded p-2 bg-light">
                                                        <i class="fas fa-play text-success fa-2x mb-2"></i>
                                                        <h6 class="mb-1">4. Start Trading</h6>
                                                        <small class="text-muted">Paper trade safely</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Academic Research Citation -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="card border-warning">
                                        <div class="card-header py-2 bg-warning text-dark">
                                            <h6 class="mb-0"><i class="fas fa-graduation-cap"></i> Academic Foundation</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h6 class="text-warning mb-2">FutureQuant Transformer Research</h6>
                                                    <p class="small text-muted mb-2">
                                                        This trading system implements the distribution-based strategy from the research paper 
                                                        <strong>"Trading Under Uncertainty: A Distribution-Based Strategy for Futures Markets Using FutureQuant Transformer"</strong>

                                                    </p>
                                                    <div class="d-flex align-items-center gap-3">
                                                        <a href="https://arxiv.org/abs/2505.05595" target="_blank" class="btn btn-outline-warning btn-sm">
                                                            <i class="fas fa-external-link-alt"></i> View Paper
                                                        </a>
                                                        <span class="badge bg-primary">arXiv:2505.05595</span>
                                                        <span class="badge bg-success">Published: May 8, 2025</span>
                                                        <span class="badge bg-info">q-fin.TR</span>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <h6 class="text-success mb-2">Key Results</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Performance:</strong> 0.1193% avg gain per 30-min trade</li>
                                                        <li><strong>Innovation:</strong> Distribution-based forecasting</li>
                                                        <li><strong>Technology:</strong> Attention mechanism transformer</li>
                                                        <li><strong>Markets:</strong> Futures with LOB data</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Data & Features Pipeline -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="card border-primary">
                                        <div class="card-header py-2 bg-primary text-white">
                                            <h6 class="mb-0"><i class="fas fa-database"></i> Data & Features Pipeline</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <h6 class="text-primary mb-2">Data Sources</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Primary:</strong> Yahoo Finance (yfinance library)</li>
                                                        <li><strong>Futures:</strong> ES (S&P 500), NQ (Nasdaq), YM (Dow)</li>
                                                        <li><strong>Timeframes:</strong> 1D, 1H, 15M, 5M intervals</li>
                                                        <li><strong>Data Types:</strong> OHLCV, volume, market cap</li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4">
                                                    <h6 class="text-success mb-2">Manual Data Flow</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Click Fetch:</strong> Download from Yahoo Finance</li>
                                                        <li><strong>Market Hours:</strong> 9:30 AM - 4:00 PM ET</li>
                                                        <li><strong>Store:</strong> Local SQLite database</li>
                                                        <li><strong>Ready:</strong> Data available for features</li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-4">
                                                    <h6 class="text-warning mb-2">Features Computation</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Click Features:</strong> Computes 50+ technical indicators</li>
                                                        <li><strong>Indicators:</strong> RSI, MACD, Bollinger Bands, ATR</li>
                                                        <li><strong>Purpose:</strong> Creates AI training features</li>
                                                        <li><strong>Output:</strong> Ready for model training</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Technical Algorithm Details -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="card border-dark">
                                        <div class="card-header py-2 bg-dark text-white">
                                            <h6 class="mb-0"><i class="fas fa-microchip"></i> What Makes It Smart</h6>
                                        </div>
                                        <div class="card-body py-2">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="text-primary"><i class="fas fa-brain"></i> AI Learning</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Smart Models:</strong> AI that gets better over time</li>
                                                        <li><strong>Multiple Approaches:</strong> Combines different prediction methods</li>
                                                        <li><strong>Probability Estimates:</strong> Shows confidence in predictions</li>
                                                        <li><strong>Market Patterns:</strong> Recognizes 50+ trading signals</li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6 class="text-success"><i class="fas fa-chart-line"></i> Trading Strategy</h6>
                                                    <ul class="small text-muted mb-0">
                                                        <li><strong>Pattern Recognition:</strong> Finds when prices are too high/low</li>
                                                        <li><strong>Trend Following:</strong> Rides market momentum</li>
                                                        <li><strong>Risk Control:</strong> Manages position sizes and losses</li>
                                                        <li><strong>Fast Signals:</strong> Updates predictions every second</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    <div class="tab-pane fade" id="rag-bi-content" role="tabpanel" aria-labelledby="rag-bi-tab">
                        <div id="rag-bi-root"></div>
                    </div>
                    <div class="tab-pane fade" id="ai-platform-comparables-content" role="tabpanel" aria-labelledby="ai-platform-comparables-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column" style="max-width: 1100px; margin: 0 auto; border-radius: 16px;">
                            <div class="card-body d-flex flex-column" style="padding: 32px;">
                                <div class="card-header-row mb-3">
                                    <span class="card-title" style="font-size: 2rem; font-weight: 600; color: #183153;">ðŸ¤– AI Platform Comparables</span>
                                </div>
                                <div class="alert alert-info mb-4" style="background: #f1f5fa; color: #27457c; border: none; border-radius: 10px;">
                                    <strong>What is this?</strong> This section compares leading AI/LLM platforms and toolkits that serve as alternatives or complements to <b>OpenRouter</b> for LLM access, orchestration, monitoring, and local inference.
                                </div>
                                <!-- Interactive Filters -->
                                <div class="mb-3 d-flex flex-wrap align-items-center" id="ai-platform-filters">
                                    <input type="text" id="ai-platform-search" class="form-control me-3" style="max-width: 260px; margin-bottom: 8px;" placeholder="Search platforms or features...">
                                    <div class="d-flex flex-wrap gap-2">
                                        <span class="badge bg-primary filter-chip" data-category="Commercial">Commercial</span>
                                        <span class="badge bg-success filter-chip" data-category="Open-Source">Open-Source</span>
                                        <span class="badge bg-info filter-chip" data-category="Monitoring">Monitoring</span>
                                        <span class="badge bg-warning text-dark filter-chip" data-category="Orchestration">Orchestration</span>
                                        <span class="badge bg-secondary filter-chip" data-category="Local">Local</span>
                                    </div>
                                </div>
                                <!-- Chart Placeholder -->
                                <div class="mb-4" style="background: #f8fafc; border-radius: 10px; padding: 18px 10px; text-align: center;">
                                    <canvas id="ai-platform-chart" width="600" height="220" style="max-width: 100%; margin-bottom: 8px;"></canvas>
                                    <div style="color: #888; font-size: 0.98rem;">(Interactive chart coming soon: popularity, speed, or cost comparison)</div>
                                </div>
                                <h2 style="font-size: 1.3rem; margin-top: 24px; margin-bottom: 12px; color: #27457c;">Platform Comparison</h2>
                                <div class="table-responsive mb-4">
                                    <table class="table table-bordered" id="ai-platform-table" style="background: #fff; cursor: pointer;">
                                        <thead class="table-light">
                                            <tr>
                                                <th data-sort="Platform">Platform</th>
                                                <th data-sort="Description">Description</th>
                                                <th data-sort="Key Features">Key Features</th>
                                                <th data-sort="Notes">Notes</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr data-category="Commercial">
                                                <td>OpenRouter</td><td>Unified API for commercial LLMs</td><td>OpenAI, Anthropic, Cohere, Mistral, etc.; OpenAI-compatible API</td><td>Best for commercial LLM aggregation</td>
                                                <td><a href="https://openrouter.ai/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Open-Source">
                                                <td>Together.ai</td><td>Open LLM inference platform</td><td>Mixtral, LLaMA, Gemma, etc.; OpenAI-compatible API</td><td>Often free/cheaper, focused on open models</td>
                                                <td><a href="https://www.together.ai/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Open-Source">
                                                <td>Hugging Face</td><td>Model hub & inference endpoints</td><td>100,000+ models, Spaces, datasets, OSS focus</td><td>Largest OSS model library</td>
                                                <td><a href="https://huggingface.co/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Open-Source">
                                                <td>Fireworks.ai</td><td>OSS LLM hosting at scale</td><td>Fast, OpenAI-style endpoint, Mistral, LLaMA2</td><td>Production-grade OSS LLMs</td>
                                                <td><a href="https://fireworks.ai/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Open-Source">
                                                <td>Groq API</td><td>Ultra-fast inference (Mixtral)</td><td>Low latency, custom hardware, Mixtral</td><td>Limited to select models</td>
                                                <td><a href="https://groq.com/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Open-Source">
                                                <td>Anyscale Endpoints</td><td>Hosted open LLMs</td><td>OpenAI-compatible, Ray-based, cost-efficient</td><td>Performance/cost focus</td>
                                                <td><a href="https://www.anyscale.com/endpoints" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Local">
                                                <td>Ollama (local)</td><td>Run LLMs locally</td><td>CLI/API, LLaMA2, Code LLaMA, Mistral</td><td>For local/dev use only</td>
                                                <td><a href="https://ollama.com/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Commercial">
                                                <td>Vercel AI SDK</td><td>LLM app toolkit</td><td>Unified LLM access, OpenAI, Anthropic, Cohere</td><td>Requires Vercel + backend</td>
                                                <td><a href="https://vercel.com/docs/ai" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Orchestration">
                                                <td>LangChain</td><td>LLM orchestration framework</td><td>Multi-LLM routing, agents, plugins</td><td>You write orchestration logic</td>
                                                <td><a href="https://www.langchain.com/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Monitoring">
                                                <td>Helicone</td><td>LLM API logging/monitoring</td><td>Proxy, dashboards, analytics</td><td>Not a router, but often used with OpenRouter</td>
                                                <td><a href="https://www.helicone.ai/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                            <tr data-category="Monitoring">
                                                <td>PromptLayer</td><td>Prompt management & tracking</td><td>Logs, versions, routes prompts</td><td>Great for prompt versioning</td>
                                                <td><a href="https://www.promptlayer.com/" target="_blank" class="btn btn-outline-primary btn-sm">Learn More</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <h2 style="font-size: 1.15rem; margin-top: 24px; margin-bottom: 10px; color: #27457c;">Parameter Explanations</h2>
                                <div class="alert alert-secondary mb-4" style="background: #f8fafc; color: #183153; border: none; border-radius: 10px;">
                                    <div style="margin-bottom: 8px;"><strong>Model:</strong> Choose the AI model that best fits your needs. Each model has different strengths and capabilities.</div>
                                    <div style="margin-bottom: 8px;"><strong>Temperature:</strong> Controls randomness in responses. Lower values (0.1-0.3) make responses more focused and deterministic. Higher values (0.7-1.0) make responses more creative and varied. Range: 0.0 to 2.0.</div>
                                    <div><strong>Max Tokens:</strong> Limits the length of the AI response. Higher values allow longer, more detailed responses. Lower values create shorter, more concise answers. Range: 100 to 4000 tokens.</div>
                                </div>
                                <h2 style="font-size: 1.15rem; margin-top: 24px; margin-bottom: 10px; color: #27457c;">ðŸ§  Summary of Positioning</h2>
                                <ul style="margin-bottom: 24px;">
                                    <li><b>Best router for commercial LLMs:</b> OpenRouter</li>
                                    <li><b>Best for open-source LLMs:</b> Together.ai, Fireworks.ai</li>
                                    <li><b>Best for monitoring/tracking:</b> Helicone, PromptLayer</li>
                                    <li><b>Best for orchestration & logic:</b> LangChain</li>
                                    <li><b>Best for local dev:</b> Ollama</li>
                                </ul>
                                <h2 style="font-size: 1.15rem; margin-top: 24px; margin-bottom: 10px; color: #27457c;">Use Case â†’ Best Tool(s) â†’ Highlights</h2>
                                <div class="table-responsive">
                                    <table class="table table-bordered usecase-table" style="background: #fff;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Use Case</th>
                                                <th>Best Tool(s)</th>
                                                <th>Highlights</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>Commercial LLM Aggregation</td><td>ðŸ† OpenRouter</td><td>Unified access to OpenAI, Anthropic, Cohere, etc.</td></tr>
                                            <tr><td>Open-Source Model Access</td><td>Together.ai, Fireworks.ai</td><td>Fast, cost-efficient access to Mixtral, LLaMA, Mistral</td></tr>
                                            <tr><td>Prompt Logging & Monitoring</td><td>Helicone, PromptLayer</td><td>Dashboards, prompt tracking, version control</td></tr>
                                            <tr><td>LLM Orchestration Logic</td><td>LangChain</td><td>Workflow control, multi-model routing, agents</td></tr>
                                            <tr><td>Local Model Running</td><td>Ollama</td><td>Run LLMs (like LLaMA2) locally via CLI/API</td></tr>
                                            <tr><td>Fast Open-Source Inference</td><td>Groq API</td><td>Lightning-fast Mixtral, low latency</td></tr>
                                            <tr><td>Custom App Integration</td><td>Vercel AI SDK</td><td>LLM abstraction with Vercel + custom backend</td></tr>
                                            <tr><td>Performance-Focused LLM APIs</td><td>Anyscale Endpoints</td><td>Optimized OpenAI-compatible APIs, from Ray team</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 32px; color: #888; font-size: 0.98rem;">Want a visual diagram of these tools by category? Let us know!</div>
                                
                                <!-- Detailed Model Comparison Section -->
                                <h2 style="font-size: 1.5rem; margin-top: 48px; margin-bottom: 20px; color: #27457c; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px;">ðŸ” Detailed Free Model Comparison</h2>
                                <div class="alert alert-success mb-4" style="background: #f0f8f0; color: #27457c; border: none; border-radius: 10px;">
                                    <strong>Updated Models:</strong> This section provides a comprehensive comparison of the latest free models available on OpenRouter, including context windows, performance metrics, and use case recommendations.
                                </div>
                                
                                <!-- Model Comparison Filters -->
                                <div class="mb-4 d-flex flex-wrap align-items-center gap-3" id="model-comparison-filters">
                                    <input type="text" id="model-search" class="form-control" style="max-width: 300px;" placeholder="Search models by name, provider, or features...">
                                    <div class="d-flex flex-wrap gap-2">
                                        <span class="badge bg-primary filter-chip" data-category="high_context">High Context</span>
                                        <span class="badge bg-success filter-chip" data-category="fast_inference">Fast Inference</span>
                                        <span class="badge bg-info filter-chip" data-category="multilingual">Multilingual</span>
                                        <span class="badge bg-warning text-dark filter-chip" data-category="code_focused">Code Focused</span>
                                        <span class="badge bg-secondary filter-chip" data-category="chat_optimized">Chat Optimized</span>
                                        <span class="badge bg-danger filter-chip" data-category="experimental">Experimental</span>
                                    </div>
                                </div>
                                
                                <!-- Detailed Model Comparison Table -->
                                <div class="table-responsive mb-4">
                                    <table class="table table-bordered table-hover" id="model-comparison-table" style="background: #fff; font-size: 0.95rem;">
                                        <thead class="table-dark">
                                            <tr>
                                                <th style="min-width: 150px;">Model Name</th>
                                                <th style="min-width: 120px;">Provider</th>
                                                <th style="min-width: 100px;">Context Window</th>
                                                <th style="min-width: 100px;">Performance</th>
                                                <th style="min-width: 100px;">Model Size</th>
                                                <th style="min-width: 120px;">Best For</th>
                                                <th style="min-width: 150px;">Strengths</th>
                                                <th style="min-width: 150px;">Notes</th>
                                            </tr>
                                        </thead>
                                        <tbody id="model-comparison-tbody">
                                            <!-- Model data will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Model Performance Chart -->
                                <div class="mb-4" style="background: #f8fafc; border-radius: 10px; padding: 20px; text-align: center;">
                                    <h4 style="color: #27457c; margin-bottom: 15px;">Model Performance Comparison</h4>
                                    <canvas id="model-performance-chart" width="800" height="300" style="max-width: 100%; margin-bottom: 10px;"></canvas>
                                    <div style="color: #888; font-size: 0.9rem;">Context window size vs. model performance rating</div>
                                </div>
                                
                                <!-- Model Recommendations -->
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="card h-100" style="border: 1px solid #e0e0e0;">
                                            <div class="card-header" style="background: #f8f9fa; color: #27457c; font-weight: 600;">
                                                ðŸ† Top Recommendations
                                            </div>
                                            <div class="card-body">
                                                <ul class="list-unstyled mb-0">
                                                    <li class="mb-2"><strong>Best Overall:</strong> <span class="text-primary">DeepSeek Chat V3</span> (chat-optimized)</li>
                                                    <li class="mb-2"><strong>Best for Code:</strong> <span class="text-success">Mistral Small 3.2</span> (strong reasoning)</li>
                                                    <li class="mb-2"><strong>Best for Long Context:</strong> <span class="text-info">Kimi K2</span> (200K tokens)</li>
                                                    <li class="mb-2"><strong>Fastest:</strong> <span class="text-warning">Gemma 3N</span> (2B parameters)</li>
                                                    <li class="mb-2"><strong>Most Experimental:</strong> <span class="text-danger">Quasar Alpha</span> (cutting-edge)</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card h-100" style="border: 1px solid #e0e0e0;">
                                            <div class="card-header" style="background: #f8f9fa; color: #27457c; font-weight: 600;">
                                                ðŸ“Š Performance Metrics
                                            </div>
                                            <div class="card-body">
                                                <ul class="list-unstyled mb-0">
                                                    <li class="mb-2"><strong>Context Range:</strong> 8K - 200K tokens</li>
                                                    <li class="mb-2"><strong>Model Sizes:</strong> 2B - 24B+ parameters</li>
                                                    <li class="mb-2"><strong>All Models:</strong> Free tier available</li>
                                                    <li class="mb-2"><strong>API Compatibility:</strong> OpenAI-compatible</li>
                                                    <li class="mb-2"><strong>Total Models:</strong> 9 free models</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="market-overtime-content" role="tabpanel" aria-labelledby="market-overtime-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column">
                            <div class="card-body d-flex flex-column">
                                <div class="card-header-row flex-column align-items-stretch" style="gap:0.5rem;">
                                    <div class="d-flex align-items-center">
                                        <div class="card-title" style="font-size:1.1rem;font-weight:600;color:#183153;">Market Overtime</div>
                                        <button type="button" class="btn btn-sm btn-outline-secondary ms-3 how-it-works-btn" data-bs-target="#marketOvertimeHelpModal">
                                            How it works
                                        </button>
                                    </div>
                                    <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
                                        <div id="react-stock-select"></div>
                                        <label for="stock-select" class="form-label">Select companies:</label>
                                        <select id="stock-select" class="form-select" multiple>
                                            <option value="AAPL">Apple (AAPL)</option>
                                            <option value="MSFT">Microsoft (MSFT)</option>
                                            <option value="GOOGL">Google (GOOGL)</option>
                                            <option value="AMZN">Amazon (AMZN)</option>
                                            <option value="META">Meta (META)</option>
                                            <option value="NVDA">Nvidia (NVDA)</option>
                                            <option value="TSLA">Tesla (TSLA)</option>
                                            <option value="NFLX">Netflix (NFLX)</option>
                                            <option value="AMD">AMD (AMD)</option>
                                            <option value="INTC">Intel (INTC)</option>
                                            <option value="BRK-B">Berkshire Hathaway (BRK-B)</option>
                                            <option value="JNJ">Johnson & Johnson (JNJ)</option>
                                            <option value="V">Visa (V)</option>
                                            <option value="JPM">JPMorgan Chase (JPM)</option>
                                            <option value="WMT">Walmart (WMT)</option>
                                            <option value="PG">Procter & Gamble (PG)</option>
                                            <option value="KO">Coca-Cola (KO)</option>
                                            <option value="XOM">Exxon Mobil (XOM)</option>
                                            <option value="SPY">S&P 500 ETF (SPY)</option>
                                            <option value="QQQ">Nasdaq 100 ETF (QQQ)</option>
                                            <option value="VOO">S&P 500 ETF (VOO)</option>
                                            <option value="ARKK">ARK Innovation ETF (ARKK)</option>
                                            <option value="EEM">Emerging Markets ETF (EEM)</option>
                                            <option value="XLF">Financial Select Sector SPDR (XLF)</option>
                                            <option value="ES=F">S&P 500 E-mini (ES=F)</option>
                                            <option value="NQ=F">Nasdaq 100 E-mini (NQ=F)</option>
                                            <option value="YM=F">Dow Jones E-mini (YM=F)</option>
                                            <option value="RTY=F">Russell 2000 E-mini (RTY=F)</option>
                                            <option value="MES=F">Micro E-mini S&P 500 (MES=F)</option>
                                            <option value="MNQ=F">Micro E-mini Nasdaq 100 (MNQ=F)</option>
                                            <option value="MYM=F">Micro E-mini Dow (MYM=F)</option>
                                            <option value="M2K=F">Micro E-mini Russell 2000 (M2K=F)</option>
                                            <option value="GC=F">Gold (GC=F)</option>
                                            <option value="SI=F">Silver (SI=F)</option>
                                            <option value="CL=F">Crude Oil WTI (CL=F)</option>
                                            <option value="BZ=F">Brent Oil (BZ=F)</option>
                                            <option value="NG=F">Natural Gas (NG=F)</option>
                                            <option value="HG=F">Copper (HG=F)</option>
                                            <option value="ZC=F">Corn (ZC=F)</option>
                                            <option value="ZS=F">Soybeans (ZS=F)</option>
                                            <option value="ZW=F">Wheat (ZW=F)</option>
                                            <option value="VX=F">VIX (VX=F)</option>
                                            <option value="BTC=F">Bitcoin Futures (BTC=F)</option>
                                            <option value="ETH=F">Ethereum Futures (ETH=F)</option>
                                        </select>
                                    </div>
                                    <div class="d-flex flex-wrap align-items-center gap-3 mb-2">
                                    </div>
                                    <div id="market-legend" class="mb-2" style="font-size:1rem;color:#183153;font-weight:500;"></div>
                                </div>
                                <div class="card-section-vertical">
                                    <div id="stock-trends-result" class="mb-2"></div>
                                    <div class="chart-area"><div id="d3-stock-chart"></div></div>
                                    <div class="mb-2" style="width:100%;max-width:700px;">
                                        <div id="market-slider"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="volatility-explorer-content" role="tabpanel" aria-labelledby="volatility-explorer-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column">
                            <div class="card-body d-flex flex-column">
                                <div class="card-header-row">
                                    <div class="d-flex align-items-center">
                                        <span class="card-title">ðŸ“Š Enhanced Volatility Explorer</span>
                                        <button type="button" class="btn btn-sm btn-outline-secondary ms-3 how-it-works-btn" data-bs-target="#volatilityExplorerHelpModal">
                                            How it works
                                        </button>
                                    </div>
                                </div>
                                <div class="card-section-vertical">
                                    <div class="mb-2" style="color:#183153;font-size:1.04rem;">
                                        <span style="font-size:1.1rem;">ðŸ“ˆ <b>Rolling volatility</b> reveals when the stock experienced sharp price movements.</span>
                                        <br>
                                        <span style="font-size:1rem;">ðŸŽ¯ <b>Regime analysis</b> identifies different market conditions and volatility patterns.</span>
                                    </div>
                                    
                                    <!-- Company Selection -->
                                    <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
                                        <label for="volatility-stock-select" class="form-label mb-0">Select company:</label>
                                        <select id="volatility-stock-select" class="form-select" style="max-width: 300px;">
                                            <option value="AAPL">Apple (AAPL)</option>
                                            <option value="MSFT">Microsoft (MSFT)</option>
                                            <option value="GOOGL">Google (GOOGL)</option>
                                            <option value="AMZN">Amazon (AMZN)</option>
                                            <option value="META">Meta (META)</option>
                                            <option value="NVDA">Nvidia (NVDA)</option>
                                            <option value="TSLA">Tesla (TSLA)</option>
                                            <option value="NFLX">Netflix (NFLX)</option>
                                            <option value="AMD">AMD (AMD)</option>
                                            <option value="INTC">Intel (INTC)</option>
                                            <option value="BRK-B">Berkshire Hathaway (BRK-B)</option>
                                            <option value="JNJ">Johnson & Johnson (JNJ)</option>
                                            <option value="V">Visa (V)</option>
                                            <option value="JPM">JPMorgan Chase (JPM)</option>
                                            <option value="WMT">Walmart (WMT)</option>
                                            <option value="PG">Procter & Gamble (PG)</option>
                                            <option value="KO">Coca-Cola (KO)</option>
                                            <option value="XOM">Exxon Mobil (XOM)</option>
                                            <option value="SPY">S&P 500 ETF (SPY)</option>
                                            <option value="QQQ">Nasdaq 100 ETF (QQQ)</option>
                                            <option value="VOO">S&P 500 ETF (VOO)</option>
                                            <option value="ARKK">ARK Innovation ETF (ARKK)</option>
                                            <option value="EEM">Emerging Markets ETF (EEM)</option>
                                            <option value="XLF">Financial Select Sector SPDR (XLF)</option>
                                            <option value="ES=F">S&P 500 E-mini (ES=F)</option>
                                            <option value="NQ=F">Nasdaq 100 E-mini (NQ=F)</option>
                                            <option value="YM=F">Dow Jones E-mini (YM=F)</option>
                                            <option value="RTY=F">Russell 2000 E-mini (RTY=F)</option>
                                            <option value="MES=F">Micro E-mini S&P 500 (MES=F)</option>
                                            <option value="MNQ=F">Micro E-mini Nasdaq 100 (MNQ=F)</option>
                                            <option value="MYM=F">Micro E-mini Dow (MYM=F)</option>
                                            <option value="M2K=F">Micro E-mini Russell 2000 (M2K=F)</option>
                                            <option value="GC=F">Gold (GC=F)</option>
                                            <option value="SI=F">Silver (SI=F)</option>
                                            <option value="CL=F">Crude Oil WTI (CL=F)</option>
                                            <option value="BZ=F">Brent Oil (BZ=F)</option>
                                            <option value="NG=F">Natural Gas (NG=F)</option>
                                            <option value="HG=F">Copper (HG=F)</option>
                                            <option value="ZC=F">Corn (ZC=F)</option>
                                            <option value="ZS=F">Soybeans (ZS=F)</option>
                                            <option value="ZW=F">Wheat (ZW=F)</option>
                                            <option value="VX=F">VIX (VX=F)</option>
                                            <option value="BTC=F">Bitcoin Futures (BTC=F)</option>
                                            <option value="ETH=F">Ethereum Futures (ETH=F)</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Enhanced Controls -->
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <div class="d-flex flex-wrap align-items-center gap-2 mb-2" id="volatility-controls">
                                                <label for="vol-window" class="form-label mb-0">Rolling Window (days):</label>
                                                <input type="number" id="vol-window" class="form-control w-auto" value="30" min="1" style="max-width:80px;">
                                                <label for="vol-years" class="form-label mb-0">Time Range (years):</label>
                                                <input type="number" id="vol-years" class="form-control w-auto" value="2" min="1" style="max-width:80px;">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
                                                <label for="regime-window" class="form-label mb-0">Regime Window (days):</label>
                                                <input type="number" id="regime-window" class="form-control w-auto" value="30" min="5" style="max-width:80px;">
                                                <button type="button" onclick="fetchAndRenderVolatilityCorrelation()" class="btn btn-dark-bbg">Analyze Volatility</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Chart Area -->
                                    <div class="chart-area"><div id="volatility-correlation-chart"></div></div>
                                    
                                    <!-- Slider Controls -->
                                    <div class="mb-2" style="width:100%;max-width:700px;">
                                        <div id="volatility-range-slider"></div>
                                        <div class="d-flex justify-content-between mt-1">
                                            <span id="volatility-range-start" style="font-size:0.98rem;"></span>
                                            <span id="volatility-range-end" style="font-size:0.98rem;"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- Regime Analysis Results -->
                                    <div id="regime-analysis-results" class="mt-4" style="display: none;">
                                        <h6 class="mb-3">ðŸ“Š Volatility Regime Analysis</h6>
                                        <div id="regime-statistics" class="row mb-3"></div>
                                        <div id="regime-periods" class="mt-3"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="tab-pane fade" id="hf-signal-tool-content" role="tabpanel" aria-labelledby="hf-signal-tool-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column">
                            <div class="card-body d-flex flex-column">
                                <div class="card-header-row">
                                    <div class="d-flex align-items-center">
                                        <span class="card-title">Trading Strategy Analyzer</span>
                                        <button type="button" class="btn btn-sm btn-outline-secondary ms-3 how-it-works-btn" data-bs-target="#tradingStrategyHelpModal">
                                            How it works
                                        </button>
                                    </div>
                                </div>
                                <div class="container py-4"><div id="react-hedge-fund-tool"></div></div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="deepseek-chatbot-content" role="tabpanel" aria-labelledby="deepseek-chatbot-tab">
                        <div id="react-deepseek-chatbot"></div>
                    </div>

                    <div class="tab-pane fade" id="mnq-dashboard-content" role="tabpanel" aria-labelledby="mnq-dashboard-tab">
                        <div class="card shadow-sm flex-fill d-flex flex-column" style="max-width: 1200px; margin: 0 auto; border-radius: 16px;">
                            <div class="card-body d-flex flex-column" style="padding: 32px;">
                                <div class="card-header-row mb-3">
                                    <span class="card-title" style="font-size: 2rem; font-weight: 600; color: #183153;">ðŸ§ª Experimental Trading Hub</span>
                                </div>
                                <div class="alert alert-info mb-4" style="background: #f1f5fa; color: #27457c; border: none; border-radius: 10px;">
                                    <strong>What is this?</strong> This experimental hub tests various investment strategies and amounts to discover optimal performance patterns. Currently analyzing MNQ (Micro E-mini NASDAQ-100) futures using Dollar-Cost Averaging (DCA) with dynamic position sizing.
                                </div>
                                
                                <!-- Investment Parameters -->
                                <div class="card mb-4" style="border-radius: 12px;">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">Investment Parameters</h5>
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label for="mnq-weekly-amount" class="form-label">Weekly Investment Amount ($)</label>
                                                <input type="number" class="form-control" id="mnq-weekly-amount" value="1000" min="100" max="10000" step="100">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="mnq-start-date" class="form-label">Start Date</label>
                                                <input type="date" class="form-control" id="mnq-start-date">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="mnq-end-date" class="form-label">End Date</label>
                                                <input type="date" class="form-control" id="mnq-end-date">
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-info-circle"></i> 
                                                Default start date is 1 year ago. Maximum date range is 5 years.
                                            </small>
                                        </div>
                                        <div class="mt-3">
                                            <button class="btn btn-dark-bbg" id="mnq-calculate-btn">Calculate Performance</button>
                                            <button class="btn btn-outline-secondary ms-2" id="mnq-reset-btn">Reset to Defaults</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Performance Summary Table -->
                                <div class="card mb-4" style="border-radius: 12px;" id="mnq-performance-cards">
                                    <div class="card-header" style="background: #f8f9fa; border-bottom: 1px solid #dee2e6; border-radius: 12px 12px 0 0;">
                                        <h6 class="mb-0" style="color: #495057; font-weight: 600;">ðŸ“Š Performance Summary</h6>
                                    </div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-sm mb-0" style="margin: 0;">
                                                <tbody>
                                                    <tr>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #e8f5e8, #d4edda); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Total Invested</div>
                                                                <div class="h5 mb-0" id="mnq-total-invested" style="color: #28a745; font-weight: 700;">$0</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #e8f4fd, #d1ecf1); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Current Value</div>
                                                                <div class="h5 mb-0" id="mnq-current-value" style="color: #17a2b8; font-weight: 700;">$0</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Total Return</div>
                                                                <div class="h5 mb-0" id="mnq-total-return" style="color: #ffc107; font-weight: 700;">0.00%</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #f8d7da, #f5c6cb); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">CAGR</div>
                                                                <div class="h5 mb-0" id="mnq-cagr" style="color: #dc3545; font-weight: 700;">0.00%</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #e2e3e5, #d6d8db); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Volatility</div>
                                                                <div class="h5 mb-0" id="mnq-volatility" style="color: #6c757d; font-weight: 700;">0.00%</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #d1ecf1, #bee5eb); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Sharpe Ratio</div>
                                                                <div class="h5 mb-0" id="mnq-sharpe" style="color: #0c5460; font-weight: 700;">0.00</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Max Drawdown</div>
                                                                <div class="h5 mb-0" id="mnq-max-drawdown" style="color: #856404; font-weight: 700;">0.00%</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #d4edda, #c3e6cb); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Win Rate</div>
                                                                <div class="h5 mb-0" id="mnq-win-rate" style="color: #155724; font-weight: 700;">0.00%</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #e8f4fd, #d1ecf1); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Profit Factor</div>
                                                                <div class="h5 mb-0" id="mnq-profit-factor" style="color: #0c5460; font-weight: 700;">0.00</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #f8d7da, #f5c6cb); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Total Weeks</div>
                                                                <div class="h5 mb-0" id="mnq-total-weeks" style="color: #721c24; font-weight: 700;">0</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Total Contracts</div>
                                                                <div class="h5 mb-0" id="mnq-total-contracts" style="color: #856404; font-weight: 700;">0</div>
                                                            </div>
                                                        </td>
                                                        <td class="text-center" style="background: linear-gradient(135deg, #e8f5e8, #d4edda); border: none;">
                                                            <div class="py-3">
                                                                <div class="text-muted small">Avg Price</div>
                                                                <div class="h5 mb-0" id="mnq-avg-price" style="color: #28a745; font-weight: 700;">$0</div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>





                                <!-- AI Analysis Section -->
                                <div class="card mb-4" style="border-radius: 12px;">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h5 class="card-title mb-0">ðŸ” Diagnostic Event Analysis</h5>
                                            <div class="d-flex align-items-center gap-3">
                                                <div class="d-flex align-items-center gap-2">
                                                    <div class="spinner-border spinner-border-sm text-primary" id="ai-analysis-spinner" style="display: none;" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                    <div class="text-muted small" id="ai-analysis-timer">00:00</div>
                                                </div>
                                                <button class="btn btn-primary btn-sm" onclick="refreshDiagnosticAnalysis()" title="Refresh Diagnostic Analysis" id="ai-refresh-btn">
                                                    Refresh
                                                </button>
                                            </div>
                                        </div>
                                        <div id="ai-combined-analysis" class="text-muted">
                                            Click "Calculate Performance" to identify the worst week and analyze market factor impacts.
                                        </div>
                                        <style>
                                            #ai-combined-analysis h1, #ai-combined-analysis h2, #ai-combined-analysis h3 {
                                                color: #183153;
                                                margin-top: 1rem;
                                                margin-bottom: 0.5rem;
                                                font-weight: 600;
                                            }
                                            #ai-combined-analysis strong {
                                                color: #183153;
                                                font-weight: 600;
                                            }
                                            #ai-combined-analysis table {
                                                width: 100%;
                                                border-collapse: collapse;
                                                margin: 1rem 0;
                                            }
                                            #ai-combined-analysis th, #ai-combined-analysis td {
                                                border: 1px solid #dee2e6;
                                                padding: 0.5rem;
                                                text-align: left;
                                            }
                                            #ai-combined-analysis th {
                                                background-color: #f8f9fa;
                                                font-weight: 600;
                                            }
                                            #ai-combined-analysis ul {
                                                margin: 0.5rem 0;
                                                padding-left: 1.5rem;
                                            }
                                            #ai-combined-analysis li {
                                                margin: 0.25rem 0;
                                            }
                                            
                                            /* Diagnostic Analysis Styles - Compact */
                                            .diagnostic-analysis {
                                                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                                max-width: 800px;
                                                margin: 0 auto;
                                            }
                                            
                                            .diagnostic-header h4 {
                                                color: #0d6efd;
                                                font-weight: 700;
                                                margin-bottom: 0.5rem;
                                            }
                                            
                                            .factor-impact-section table {
                                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                                border-radius: 6px;
                                                overflow: hidden;
                                                font-size: 0.9rem;
                                            }
                                            
                                            .factor-impact-section th {
                                                background: linear-gradient(135deg, #343a40, #495057) !important;
                                                color: white;
                                                font-weight: 600;
                                                text-transform: uppercase;
                                                letter-spacing: 0.3px;
                                                padding: 8px 12px;
                                            }
                                            
                                            .factor-impact-section td {
                                                padding: 8px 12px;
                                                vertical-align: middle;
                                            }
                                            
                                            .factor-impact-section tr:hover {
                                                background-color: #f8f9fa;
                                            }
                                            
                                            .key-drivers .card {
                                                border-radius: 6px;
                                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                                                transition: all 0.2s ease;
                                                cursor: pointer;
                                            }
                                            
                                            .key-drivers .card:hover {
                                                transform: translateY(-1px);
                                                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
                                            }
                                            
                                            .key-drivers .card-body {
                                                padding: 6px 8px;
                                                font-weight: 500;
                                                font-size: 0.85rem;
                                            }
                                            
                                            .alert {
                                                margin-bottom: 1rem;
                                                border-radius: 6px;
                                            }
                                        </style>
                                    </div>
                                </div>


                                <div class="card mb-4" style="border-radius: 12px;">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">ðŸ“Š Top 5 Weekly Amounts by Performance</h5>
                                        <div class="row">
                                            <!-- Left Column: By Return % -->
                                            <div class="col-md-6">
                                                <div class="card" style="border: 1px solid #e9ecef; background: #f8f9fa;">
                                                    <div class="card-header text-center" style="background: #e3f2fd; border-bottom: 1px solid #e9ecef;">
                                                        <h6 class="mb-0" style="color: #1976d2; font-weight: 600;">ðŸ† By Return %</h6>
                                                    </div>
                                                    <div class="card-body p-0">
                                                        <div id="top-by-percentage" class="list-group list-group-flush">
                                                            <div class="list-group-item text-center text-muted py-3">
                                                                Click "Calculate Performance" to see top amounts by return percentage
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- Right Column: By Sharpe Ratio -->
                                            <div class="col-md-6">
                                                <div class="card" style="border: 1px solid #e9ecef; background: #f8f9fa;">
                                                    <div class="card-header text-center" style="background: #e8f5e8; border-bottom: 1px solid #e9ecef;">
                                                        <h6 class="mb-0" style="color: #2e7d32; font-weight: 600;">ðŸ’° By Dollar Profit</h6>
                                                    </div>
                                                    <div class="card-body p-0">
                                                        <div id="top-by-amount" class="list-group list-group-flush">
                                                            <div class="list-group-item text-center text-muted py-3">
                                                                Click "Calculate Performance" to see top amounts by money invested
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Weekly Breakdown Table -->
                                <div class="card mb-4" style="border-radius: 12px;">
                                    <div class="card-body">
                                        <h5 class="card-title mb-3">Weekly Investment Breakdown</h5>
                                        <div class="table-responsive">
                                            <table class="table table-striped" id="mnq-weekly-table">
                                                <thead>
                                                    <tr>
                                                        <th>Week</th>
                                                        <th>Date</th>
                                                        <th>Price</th>
                                                        <th>Investment</th>
                                                        <th>Contracts Bought</th>
                                                        <th>Total Contracts</th>
                                                        <th>Total Invested</th>
                                                        <th>Current Value</th>
                                                        <th>P&L</th>
                                                        <th>Return %</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="mnq-weekly-tbody">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Loading and Error States -->
                                <div id="mnq-loading" class="text-center" style="display: none;">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p class="mt-2">Calculating MNQ investment performance...</p>
                                </div>
                                
                                <div id="mnq-error" class="alert alert-danger" style="display: none;">
                                    <strong>Error:</strong> <span id="mnq-error-message"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FutureQuant Dashboard Content -->
                    <div class="tab-pane fade" id="futurequant-dashboard-content" role="tabpanel" aria-labelledby="futurequant-dashboard-tab">
                        <div id="futurequant-dashboard-root">
                            <!-- FutureQuant Dashboard Header -->
                            <div class="card shadow-sm mb-4">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <h2 class="mb-2">
                                                <i class="fas fa-chart-line text-primary"></i> 
                                                FutureQuant Trader Dashboard
                                            </h2>
                                            <p class="text-muted mb-0">Distributional Futures Trading Platform - Research, Backtesting & Paper Trading</p>
                                            
                                            <!-- Quick Start Guide -->
                                            <div class="alert alert-info mt-3 mb-0">
                                                <h6><i class="fas fa-info-circle"></i> Quick Start Guide:</h6>
                                                <ol class="mb-0 small">
                                                    <li><strong>Select a Symbol</strong> (e.g., ES for S&P 500 futures)</li>
                                                    <li><strong>Choose a Strategy</strong> based on your risk tolerance</li>
                                                    <li><strong>View Charts</strong> to analyze market data</li>
                                                    <li><strong>Train Models</strong> or run backtests to test strategies</li>
                                                </ol>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="d-flex gap-2 justify-content-end">
                                                <button class="btn btn-outline-primary btn-sm" id="fq-ingest-data-btn">
                                                    <i class="fas fa-download"></i> Ingest Data
                                                </button>
                                                <button class="btn btn-outline-success btn-sm" id="fq-compute-features-btn">
                                                    <i class="fas fa-cogs"></i> Compute Features
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Market Overview Section -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title text-muted">Current Price</h6>
                                            <h3 class="text-primary" id="fq-current-price">$0.00</h3>
                                            <small class="text-muted" id="fq-price-change">+0.00 (0.00%)</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title text-muted">Volume</h6>
                                            <h3 class="text-info" id="fq-volume">0</h3>
                                            <small class="text-muted">Contracts</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title text-muted">Strategy</h6>
                                            <select class="form-select form-select-sm" id="fq-strategy-select">
                                                <option value="">Select Strategy</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center">
                                        <div class="card-body">
                                            <h6 class="card-title text-muted">Symbol</h6>
                                            <select class="form-select form-select-sm" id="fq-symbol-select">
                                                <option value="">Select Symbol</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Charts Section -->
                            <div class="row mb-4">
                                <div class="col-md-8">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <h6 class="mb-0">Price Chart</h6>
                                                <select class="form-select form-select-sm" id="fq-timeframe-select" style="width: auto;">
                                                    <option value="1d">1 Day</option>
                                                    <option value="1h">1 Hour</option>
                                                    <option value="15m">15 Min</option>
                                                    <option value="5m">5 Min</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="fq-price-chart" height="300" style="max-height: 300px; width: 100%;"></canvas>
                                            <div class="mt-2">
                                                <button class="btn btn-sm btn-outline-secondary" onclick="forceFutureQuantCharts()">Force Chart Init</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Return Distribution</h6>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="fq-distribution-chart" height="300" style="max-height: 300px; width: 100%;"></canvas>
                                            <div class="mt-2">
                                                <button class="btn btn-sm btn-outline-secondary" onclick="forceFutureQuantCharts()">Force Chart Init</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Trading Controls Section -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Model Training</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="d-grid gap-2">
                                                <button class="btn btn-primary" id="fq-train-model-btn">
                                                    <i class="fas fa-brain"></i> Train New Model
                                                </button>
                                                <button class="btn btn-outline-primary" id="fq-backtest-btn">
                                                    <i class="fas fa-chart-bar"></i> Run Backtest
                                                </button>
                                                <button class="btn btn-outline-secondary btn-sm" onclick="testModalCreation()">
                                                    Test Modal
                                                </button>
                                                <button class="btn btn-outline-secondary btn-sm" onclick="testModelTraining()">
                                                    Test Training
                                                </button>
                                                <button class="btn btn-outline-secondary btn-sm" onclick="testStrategyLoading()">
                                                    Test Strategy
                                                </button>
                                            </div>
                                            <div id="fq-model-types" class="row mt-3">
                                                <!-- Model types will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="card-title mb-0">Paper Trading</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="d-grid gap-2">
                                                <button class="btn btn-success" id="fq-start-paper-trading-btn">
                                                    <i class="fas fa-play"></i> Start Session
                                                </button>
                                                <button class="btn btn-danger" id="fq-stop-paper-trading-btn">
                                                    <i class="fas fa-stop"></i> Stop Session
                                                </button>
                                                <a href="paper-trading-dashboard.html" class="btn btn-primary" target="_blank">
                                                    <i class="fas fa-chart-line"></i> Live Dashboard
                                                </a>
                                            </div>
                                            <div id="fq-paper-trading-sessions" class="row mt-3">
                                                <!-- Active sessions will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Performance & Analysis Section -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Performance Chart</h6>
                                        </div>
                                        <div class="card-body">
                                            <canvas id="fq-performance-chart" height="250" style="max-height: 250px; width: 100%;"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Strategy Details</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="fq-strategy-details">
                                                <p class="text-muted">Select a strategy to view details</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Activity Section -->
                            <div class="row mb-4">
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Recent Signals</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="fq-recent-signals">
                                                <!-- Recent signals will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Job Status</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="fq-job-statuses">
                                                <!-- Job statuses will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <h6 class="mb-0">Backtest Config</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="fq-backtest-config">
                                                <!-- Backtest configuration will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container for Notifications -->
    <div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1055;">
        <!-- Toast notifications will be dynamically added here -->
    </div>
    
    <!-- Market Overtime Help Modal -->
    <div class="modal fade" id="marketOvertimeHelpModal" tabindex="-1" aria-labelledby="marketOvertimeHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="marketOvertimeHelpModalLabel">How Market Overtime Works</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This tool fetches and visualizes historical stock price data to help you analyze market trends over time.</p>
                    <ol>
                        <li><strong>Select Companies:</strong> Choose one or more companies from the dropdown menu. The chart will automatically update to show their stock price trends. You can select up to 10 companies to compare.</li>
                        <li><strong>Interactive Chart:</strong> The main chart displays the closing stock prices for the selected companies over the last three years. You can hover your mouse over the lines to see the exact price for a specific date.</li>
                        <li><strong>Zoom and Pan:</strong> Use the slider below the chart to zoom in on a specific time period. Drag the handles to adjust the start and end dates of your analysis.</li>
                    </ol>
                    <p class="text-muted small">All stock data is sourced from Yahoo Finance via yfinance.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Volatility Explorer Help Modal -->
    <div class="modal fade" id="volatilityExplorerHelpModal" tabindex="-1" aria-labelledby="volatilityExplorerHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="volatilityExplorerHelpModalLabel">How Enhanced Volatility Explorer Works</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This enhanced tool combines rolling volatility analysis with regime detection to provide comprehensive market risk insights.</p>
                    <ol>
                        <li><strong>Rolling Volatility:</strong> Set the number of days for calculating rolling volatility. A larger window (e.g., 30 days) shows longer-term trends, while a smaller window (e.g., 10 days) reveals short-term fluctuations.</li>
                        <li><strong>Time Range:</strong> Choose how many years of historical data to analyze. More data provides better context for volatility patterns.</li>
                        <li><strong>Regime Window:</strong> Set the window size for regime detection. This determines how volatility is classified into different market conditions.</li>
                        <li><strong>Interactive Visualization:</strong> The chart shows rolling volatility over time with highlighted periods of interest.</li>
                        <li><strong>Regime Analysis:</strong> Automatically identifies and analyzes different volatility regimes (Low, Medium, High, Extreme) with detailed statistics.</li>
                        <li><strong>Zoom Control:</strong> Use the slider below the chart to focus on specific time periods and examine volatility patterns in detail.</li>
                    </ol>
                    <p class="text-muted small">Volatility is calculated using the standard deviation of daily returns. Regime analysis helps identify market stress periods and optimal trading conditions.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>





    <!-- Trading Strategy Analyzer Help Modal -->
    <div class="modal fade" id="tradingStrategyHelpModal" tabindex="-1" aria-labelledby="tradingStrategyHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tradingStrategyHelpModalLabel">How Trading Strategy Analyzer Works</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This tool backtests trading strategies using historical data to evaluate their performance and risk metrics.</p>
                    <ol>
                        <li><strong>Strategy Parameters:</strong> Configure your trading strategy by setting entry/exit conditions, position sizing, and risk management rules.</li>
                        <li><strong>Historical Backtesting:</strong> The tool simulates your strategy on historical market data to see how it would have performed.</li>
                        <li><strong>Performance Metrics:</strong> View key metrics including total return, Sharpe ratio, maximum drawdown, and win rate.</li>
                        <li><strong>Risk Analysis:</strong> Understand the risk profile of your strategy with detailed risk metrics and performance breakdowns.</li>
                    </ol>
                    <p class="text-muted small">Backtesting results are based on historical data and may not predict future performance. Always consider market conditions and risk management.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Volatility Regime Strategy Help Modal -->
    <div class="modal fade" id="volatilityRegimeHelpModal" tabindex="-1" aria-labelledby="volatilityRegimeHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="volatilityRegimeHelpModalLabel">How Volatility Regime Strategy Works</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This tool analyzes market volatility regimes to help you understand different market conditions and adjust your investment strategy accordingly.</p>
                    <ol>
                        <li><strong>Select Stock:</strong> Choose a stock symbol to analyze its volatility patterns over time.</li>
                        <li><strong>Regime Detection:</strong> The tool identifies different volatility regimes: Low, Medium, High, and Extreme volatility periods.</li>
                        <li><strong>Regime Analysis:</strong> View statistics for each regime including duration, average volatility, and percentage of time spent in each regime.</li>
                        <li><strong>Strategy Insights:</strong> Understand how different market conditions affect your investment strategy and risk management.</li>
                    </ol>
                    <p class="text-muted small">Volatility regimes help identify market stress periods and can inform position sizing and risk management decisions.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
            <script src="static/main.js?v=20250117&t=1704067200&nocache=true&cb=1704067200"></script>
        <script src="static/mnq-dashboard.js"></script>
                        <script src="static/futurequant-dashboard.js?v=20250117&t=1704067200&nocache=true&cb=1704067200"></script>
    
    <script>
        // Auto-clear cache and force reload
        function forceReload() {
            // Clear browser cache
            if ('caches' in window) {
                caches.keys().then(function(names) {
                    for (let name of names) {
                        caches.delete(name);
                    }
                });
            }
            
            // Force reload without cache
            window.location.reload(true);
        }
        
        // Auto-clear cache on page load
        window.addEventListener('load', function() {
            // Clear any stored cache
            if ('localStorage' in window) {
                localStorage.clear();
            }
            if ('sessionStorage' in window) {
                sessionStorage.clear();
            }
        });
        
        // Handle hover-triggered modals for "How it works" buttons
        document.addEventListener('DOMContentLoaded', function() {
            const howItWorksButtons = document.querySelectorAll('.how-it-works-btn');
            
            howItWorksButtons.forEach(button => {
                let modal = null;
                let timeoutId = null;
                
                button.addEventListener('mouseenter', function() {
                    const targetId = this.getAttribute('data-bs-target');
                    modal = new bootstrap.Modal(document.querySelector(targetId));
                    modal.show();
                });
                
                button.addEventListener('mouseleave', function() {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                    }
                    timeoutId = setTimeout(() => {
                        if (modal) {
                            modal.hide();
                        }
                    }, 300); // Small delay to prevent immediate closing
                });
                
                // Also close modal when mouse leaves the modal itself
                const targetId = button.getAttribute('data-bs-target');
                const modalElement = document.querySelector(targetId);
                modalElement.addEventListener('mouseenter', function() {
                    if (timeoutId) {
                        clearTimeout(timeoutId);
                    }
                });
                
                modalElement.addEventListener('mouseleave', function() {
                    if (modal) {
                        modal.hide();
                    }
                });
            });
            
            // Debug Bootstrap tabs
            const tabLinks = document.querySelectorAll('#main-nav .nav-link');
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    console.log('Tab clicked:', this.textContent);
                    console.log('Target:', this.getAttribute('data-bs-target'));
                });
            });
            
            // Ensure Bootstrap tabs are working
            const tabElements = document.querySelectorAll('[data-bs-toggle="pill"]');
            tabElements.forEach(tab => {
                tab.addEventListener('shown.bs.tab', function(e) {
                    console.log('Tab shown:', e.target.textContent);
                    

                });
            });
            
            // Check if we should activate a specific tab (from monitoring page navigation)
            const activeTab = localStorage.getItem('activeTab');
            if (activeTab) {
                const targetTab = document.querySelector(`[data-bs-target="#${activeTab}-content"]`);
                if (targetTab) {
                    // Remove active class from current tab
                    document.querySelector('.nav-link.active').classList.remove('active');
                    document.querySelector('.tab-pane.show.active').classList.remove('show', 'active');
                    
                    // Activate the target tab
                    targetTab.classList.add('active');
                    targetTab.setAttribute('aria-selected', 'true');
                    
                    // Show the target content
                    const targetContent = document.getElementById(`${activeTab}-content`);
                    if (targetContent) {
                        targetContent.classList.add('show', 'active');
                    }
                }
                // Clear the stored tab
                localStorage.removeItem('activeTab');
            }
        });
    </script>
</body>
</html> 